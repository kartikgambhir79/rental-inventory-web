import React,{useEffect,useState} from 'react';import api from '../api/axios';import Spinner from '../components/common/Spinner';import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts'; export default function Dashboard(){ const [data,setData]=useState(null); useEffect(()=>{ (async ()=>{ try{ const res=await api.get('/analytics/overview'); setData(res.data); }catch(e){} })(); },[]); if(!data) return <div className='p-6'><Spinner/></div>; return (<div className='p-6'><h1 className='text-2xl font-bold mb-4'>Dashboard</h1><div className='grid grid-cols-1 md:grid-cols-4 gap-4 mb-6'><div className='bg-white p-4 rounded shadow'><div className='text-sm text-slate-500'>Total Items</div><div className='text-2xl font-semibold'>{data.totalItems}</div></div><div className='bg-white p-4 rounded shadow'><div className='text-sm text-slate-500'>Available</div><div className='text-2xl font-semibold text-green-600'>{data.availableItems}</div></div><div className='bg-white p-4 rounded shadow'><div className='text-sm text-slate-500'>Rented</div><div className='text-2xl font-semibold text-red-600'>{data.rentedItems}</div></div><div className='bg-white p-4 rounded shadow'><div className='text-sm text-slate-500'>Today Sales</div><div className='text-2xl font-semibold'>₹{data.todaySales}</div></div></div><div className='bg-white p-4 rounded shadow mb-6'><div className='text-sm text-slate-500'>Month Sales</div><div className='text-2xl font-semibold'>₹{data.monthSales}</div><div style={{height:300}} className='mt-4'><ResponsiveContainer><LineChart data={data.salesGraph}><CartesianGrid strokeDasharray='3 3'/><XAxis dataKey='date'/><YAxis/><Tooltip/><Line type='monotone' dataKey='sales' stroke='#6366f1' strokeWidth={2}/></LineChart></ResponsiveContainer></div></div><div className='bg-white p-4 rounded shadow'><h3 className='font-semibold mb-2'>Recent Rentals</h3>{data.recentRentals.map(r=> (<div key={r._id} className='p-2 border-b'><div className='font-medium'>{r.itemId?.name}</div><div className='text-sm text-slate-500'>{r.customerId?.name} • ₹{r.totalPayment} • {new Date(r.rentDate).toLocaleDateString()}</div></div>))}</div></div>); }
